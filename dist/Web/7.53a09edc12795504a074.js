(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"6uYj":function(t,e,n){"use strict";n.r(e),n.d(e,"StoriesModule",function(){return $t});var i=n("ofXK"),o=n("tyNb"),s=n("/t3+"),r=n("bv9b"),a=n("bTqV"),c=n("dNgK"),d=n("STbY"),l=n("NFeN"),h=n("R1ws"),u=n("FKr1"),p=n("fXoL");const m=["*",[["mat-card-footer"]]],b=["*","mat-card-footer"],g=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],f=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=p.Fb({type:t,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=p.Fb({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),t})(),v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=p.Fb({type:t,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),t})(),P=(()=>{class t{constructor(){this.align="start"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=p.Fb({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,e){2&t&&p.Cb("mat-card-actions-align-end","end"===e.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),t})(),S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=p.Fb({type:t,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),t})(),C=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(e){return new(e||t)(p.Kb(h.a,8))},t.\u0275cmp=p.Eb({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&p.Cb("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:b,decls:2,vars:0,template:function(t,e){1&t&&(p.ec(m),p.dc(0),p.dc(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p.Eb({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:f,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,e){1&t&&(p.ec(g),p.dc(0),p.Pb(1,"div",0),p.dc(2,1),p.Ob(),p.dc(3,2))},encapsulation:2,changeDetection:0}),t})(),x=(()=>{class t{}return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(e){return new(e||t)},imports:[[u.e],u.e]}),t})();var I=n("rDax"),E=n("kmnG"),M=n("vxfF"),A=n("u47x"),D=n("8LU1"),L=(n("0EQZ"),n("FtGj"),n("XNiG")),j=(n("NXyV"),n("VRyK"),n("JX91"),n("eIep"),n("IzEk"),n("pLZG"),n("lJxs"),n("/uUt"),n("1G5W"),n("R0Ic"),n("cH1L"),n("3Pt+"));const k={provide:new p.q("mat-select-scroll-strategy"),deps:[I.c],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let z=(()=>{class t{}return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(e){return new(e||t)},providers:[k],imports:[[i.c,I.e,u.g,u.e],M.a,E.e,u.g,u.e]}),t})();n("0MNC"),n("nLfN"),n("+rOU");const _={provide:new p.q("mat-tooltip-scroll-strategy"),deps:[I.c],useFactory:function(t){return()=>t.scrollStrategies.reposition({scrollThrottle:20})}};let T=(()=>{class t{}return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(e){return new(e||t)},providers:[_],imports:[[A.a,i.c,I.e,u.e],u.e,M.a]}),t})(),N=(()=>{class t{constructor(){this.changes=new L.a,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,e,n)=>{if(0==n||0==e)return"0 of "+n;const i=t*e;return`${i+1} \u2013 ${i<(n=Math.max(n,0))?Math.min(i+e,n):i+e} of ${n}`}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(p.Gb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const F={provide:N,deps:[[new p.A,new p.J,N]],useFactory:function(t){return t||new N}};let R=(()=>{class t{}return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(e){return new(e||t)},providers:[F],imports:[[i.c,a.c,z,T,u.e]]}),t})();var $=n("qFsG");let B=(()=>{class t{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Object(D.b)(t)}get inset(){return this._inset}set inset(t){this._inset=Object(D.b)(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p.Eb({type:t,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,e){2&t&&(p.Ab("aria-orientation",e.vertical?"vertical":"horizontal"),p.Cb("mat-divider-vertical",e.vertical)("mat-divider-horizontal",!e.vertical)("mat-divider-inset",e.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,e){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),t})(),K=(()=>{class t{}return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(e){return new(e||t)},imports:[[u.e],u.e]}),t})();function U(t,e){}const G=()=>{const t="undefined"!=typeof window?window:void 0;return t&&t.tinymce?t.tinymce:null};let V=(()=>{class t{constructor(){this.onBeforePaste=new p.n,this.onBlur=new p.n,this.onClick=new p.n,this.onContextMenu=new p.n,this.onCopy=new p.n,this.onCut=new p.n,this.onDblclick=new p.n,this.onDrag=new p.n,this.onDragDrop=new p.n,this.onDragEnd=new p.n,this.onDragGesture=new p.n,this.onDragOver=new p.n,this.onDrop=new p.n,this.onFocus=new p.n,this.onFocusIn=new p.n,this.onFocusOut=new p.n,this.onKeyDown=new p.n,this.onKeyPress=new p.n,this.onKeyUp=new p.n,this.onMouseDown=new p.n,this.onMouseEnter=new p.n,this.onMouseLeave=new p.n,this.onMouseMove=new p.n,this.onMouseOut=new p.n,this.onMouseOver=new p.n,this.onMouseUp=new p.n,this.onPaste=new p.n,this.onSelectionChange=new p.n,this.onActivate=new p.n,this.onAddUndo=new p.n,this.onBeforeAddUndo=new p.n,this.onBeforeExecCommand=new p.n,this.onBeforeGetContent=new p.n,this.onBeforeRenderUI=new p.n,this.onBeforeSetContent=new p.n,this.onChange=new p.n,this.onClearUndos=new p.n,this.onDeactivate=new p.n,this.onDirty=new p.n,this.onExecCommand=new p.n,this.onGetContent=new p.n,this.onHide=new p.n,this.onInit=new p.n,this.onInitNgModel=new p.n,this.onLoadContent=new p.n,this.onNodeChange=new p.n,this.onPostProcess=new p.n,this.onPostRender=new p.n,this.onPreInit=new p.n,this.onPreProcess=new p.n,this.onProgressState=new p.n,this.onRedo=new p.n,this.onRemove=new p.n,this.onReset=new p.n,this.onSaveContent=new p.n,this.onSetAttrib=new p.n,this.onObjectResizeStart=new p.n,this.onObjectResized=new p.n,this.onObjectSelected=new p.n,this.onSetContent=new p.n,this.onShow=new p.n,this.onSubmit=new p.n,this.onUndo=new p.n,this.onVisualAid=new p.n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=p.Fb({type:t,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),t})();const H=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],q=(t,e)=>"string"==typeof t?t.split(",").map(t=>t.trim()):Array.isArray(t)?t:e;let W=0;const Z=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return W++,t+"_"+n+W+String(e)},J=t=>void 0!==t&&"textarea"===t.tagName.toLowerCase(),Q=t=>void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" "),X=()=>{},Y=t=>null==t,tt=()=>({listeners:[],scriptId:Z("tiny-script"),scriptLoaded:!1}),et=(()=>{let t=tt();return{load:(e,n,i)=>{t.scriptLoaded?i():(t.listeners.push(i),e.getElementById(t.scriptId)||((e,n,i,o)=>{const s=n.createElement("script");s.referrerPolicy="origin",s.type="application/javascript",s.id=e,s.src=i;const r=()=>{s.removeEventListener("load",r),t.listeners.forEach(t=>t()),t.scriptLoaded=!0};s.addEventListener("load",r),n.head&&n.head.appendChild(s)})(t.scriptId,e,n))},reinitialize:()=>{t=tt()}}})(),nt=new p.q("TINYMCE_SCRIPT_SRC"),it={provide:j.j,useExisting:Object(p.T)(()=>ot),multi:!0};let ot=(()=>{class t extends V{constructor(t,e,n,i){super(),this.platformId=n,this.tinymceScriptSrc=i,this.cloudChannel="5",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=X,this.onChangeCallback=X,this._elementRef=t,this.ngZone=e,this.initialise=this.initialise.bind(this)}set disabled(t){this._disabled=t,this._editor&&this._editor.initialized&&this._editor.setMode(t?"readonly":"design")}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(t){this._editor&&this._editor.initialized?this._editor.setContent(Y(t)?"":t):this.initialValue=null===t?void 0:t}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this._editor?this._editor.setMode(t?"readonly":"design"):t&&(this.init=Object.assign(Object.assign({},this.init),{readonly:!0}))}ngAfterViewInit(){Object(i.t)(this.platformId)&&(this.id=this.id||Z("tiny-angular"),this.inline=void 0!==this.inline?"boolean"!=typeof this.inline||this.inline:this.init&&this.init.inline,this.createElement(),null!==G()?this.initialise():this._element&&this._element.ownerDocument&&et.load(this._element.ownerDocument,this.getScriptSrc(),this.initialise))}ngOnDestroy(){null!==G()&&G().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(this._element.id=this.id,J(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}initialise(){const t=Object.assign(Object.assign({},this.init),{target:this._element,inline:this.inline,readonly:this.disabled,plugins:(e=this.init&&this.init.plugins,n=this.plugins,Q(e).concat(Q(n))),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:t=>{this._editor=t,t.on("init",e=>{this.initEditor(t)}),((t,e)=>{(t=>{const e=q(t.ignoreEvents,[]);return q(t.allowedEvents,H).filter(t=>H.includes(t)&&!e.includes(t))})(t).forEach(n=>{const i=t[n];e.on(n.substring(2),n=>t.ngZone.run(()=>i.emit({event:n,editor:e})))})})(this,t),this.init&&"function"==typeof this.init.setup&&this.init.setup(t)}});var e,n;J(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{G().init(t)})}getScriptSrc(){return Y(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(t){t.on("blur",()=>this.ngZone.run(()=>this.onTouchedCallback())),t.on(this.modelEvents,()=>{this.ngZone.run(()=>this.onChangeCallback(t.getContent({format:this.outputFormat})))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{t.setContent(this.initialValue),t.getContent()!==this.initialValue&&this.onChangeCallback(t.getContent({format:this.outputFormat})),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(t)})}}return t.\u0275fac=function(e){return new(e||t)(p.Kb(p.l),p.Kb(p.z),p.Kb(p.B),p.Kb(nt,8))},t.\u0275cmp=p.Eb({type:t,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",id:"id",modelEvents:"modelEvents",disabled:"disabled",initialValue:"initialValue",init:"init",inline:"inline",outputFormat:"outputFormat",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents"},features:[p.yb([it]),p.wb],decls:1,vars:0,template:function(t,e){1&t&&p.uc(0,U,0,0,"ng-template")},styles:["[_nghost-%COMP%] { display: block; }"]}),t})(),st=(()=>{class t{}return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(e){return new(e||t)},imports:[[i.c,j.h]]}),t})();var rt=n("Kj3r"),at=n("2Vo4"),ct=n("AytR"),dt=n("tk/3");let lt=(()=>{class t{constructor(t,e){this.http=t,this.router=e,this.storiesEndPoint=ct.a.apiURL+"/stories",this.postsEndPoint=ct.a.apiURL+"/posts",this.initialState={storiesList:[],storiesListLoading:!1,selectedStory:null,selectedStoryLoading:!1,batch:{pageNo:1,pageSize:10,sortOrder:"ASC",sortProperty:""},count:0,general:""},this._state$=new at.a(this.initialState),this.state$=this._state$.asObservable()}get state(){return this._state$.value}getAllStories(t=""){this.getAllStories$(t).subscribe(t=>{this._state$.next(Object.assign(Object.assign({},this.state),{storiesList:t,storiesListLoading:!1}))})}getStory(t,e=!0){this.getStory$(t).subscribe(n=>{this._state$.next(Object.assign(Object.assign({},this.state),{selectedStory:n,selectedStoryLoading:!1})),e&&this.router.navigate(["/pages/stories/view/"+t])})}addStory(t,e=!0){this.addStory$(t).subscribe(t=>{e&&this.router.navigate(["/pages/stories/view/"+t.storyId])})}searchStories(){const{batch:t,general:e}=this.state;this.searchStories$(Object.assign({general:e},t)).subscribe(t=>{this._state$.next(Object.assign(Object.assign({},this.state),{storiesList:t.rows,count:t.count}))})}deleteStory(t){this.deleteStory$(t).subscribe(t=>{this.router.navigate(["/pages/stories"])})}refreshSelectedStory(){var t,e;this.getStory(null===(e=null===(t=this.state)||void 0===t?void 0:t.selectedStory)||void 0===e?void 0:e.storyId)}clearSelectedStory(){this._state$.next(Object.assign(Object.assign({},this.state),{selectedStory:null}))}getPost(t){this.getPost$(t).subscribe(t=>{})}addPost(t,e=!0){this.addPost$(t).subscribe(t=>{this.refreshSelectedStory()})}editPost(t){this.editPost$(t).subscribe(t=>{this.refreshSelectedStory()})}deletePost(t){this.deletePost$(t).subscribe(t=>{this.refreshSelectedStory()})}getAllStories$(t){return this.http.get(this.storiesEndPoint,{params:{general:t}})}searchStories$(t){const e={general:t.sortProperty,pageNo:t.pageNo.toString(),pageSize:t.pageSize.toString(),sortOrder:t.sortOrder,sortProperty:t.sortProperty};return this.http.get(this.storiesEndPoint+"/search",{params:e})}getStory$(t){return this.http.get(this.storiesEndPoint+"/"+t)}addStory$(t){return this.http.post(this.storiesEndPoint,t)}deleteStory$(t){return this.http.delete(this.storiesEndPoint+"/"+t)}getPost$(t){return this.http.get(this.postsEndPoint+"/"+t)}addPost$(t){return this.http.post(this.postsEndPoint,t)}editPost$(t){return this.http.put(this.postsEndPoint+"/"+t.id,t)}deletePost$(t){return this.http.delete(this.postsEndPoint+"/"+t)}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(dt.b),p.Tb(o.f))},t.\u0275prov=p.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ht=n("qXBG");let ut=(()=>{class t{transform(t,e){if(t){const e=Math.floor((+new Date-+new Date(t))/1e3);if(e<29)return"Just now";const n={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};let i;for(const t in n)if(i=Math.floor(e/n[t]),i>0)return 1===i?i+" "+t+" ago":i+" "+t+"s ago"}return t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=p.Jb({name:"dateAgo",type:t,pure:!0}),t})();function pt(t,e){1&t&&(p.Pb(0,"div",7),p.Pb(1,"button",8),p.Pb(2,"i",9),p.wc(3," add "),p.Ob(),p.wc(4," Add Story "),p.Ob(),p.Ob()),2&t&&(p.zb(1),p.fc("routerLink","./add"))}const mt=function(t){return[t]};function bt(t,e){if(1&t&&(p.Pb(0,"mat-card",11),p.Pb(1,"mat-card-header"),p.Pb(2,"mat-card-title"),p.wc(3),p.Ob(),p.Pb(4,"mat-card-subtitle"),p.wc(5),p.Lb(6,"br"),p.wc(7),p.bc(8,"dateAgo"),p.Ob(),p.Ob(),p.Lb(9,"img",12),p.Pb(10,"mat-card-content"),p.Pb(11,"p"),p.wc(12),p.Ob(),p.Ob(),p.Pb(13,"mat-card-actions"),p.Pb(14,"a",13),p.wc(15,"Read more"),p.Ob(),p.Ob(),p.Ob()),2&t){const t=e.$implicit,n=e.index;p.zb(3),p.xc(t.title),p.zb(2),p.yc("By ",t.authorName," "),p.zb(2),p.yc(" ",p.cc(8,6,t.creationDateTime),""),p.zb(2),p.fc("src","https://picsum.photos/"+(300+n)+"/"+(200-n),p.nc),p.zb(3),p.yc(" ",t.description," "),p.zb(2),p.fc("routerLink",p.hc(8,mt,"./view/"+(t.id||0)))}}function gt(t,e){1&t&&(p.Pb(0,"p"),p.wc(1,"No stories found"),p.Ob())}function ft(t,e){if(1&t&&(p.Nb(0),p.uc(1,bt,16,10,"mat-card",10),p.uc(2,gt,2,0,"p",6),p.Mb()),2&t){const t=e.ngIf;p.zb(1),p.fc("ngForOf",t.storiesList),p.zb(1),p.fc("ngIf",!t.storiesList||!t.storiesList.length)}}let yt=(()=>{class t{constructor(t,e){this.storiesService=t,this.authService=e,this.filterCtrl=new j.d,this.state$=this.storiesService.state$}ngOnInit(){this.storiesService.getAllStories(),this.sub=this.filterCtrl.valueChanges.pipe(Object(rt.a)(737)).subscribe(t=>{this.storiesService.getAllStories(t.trim())})}ngOnDestroy(){this.sub.unsubscribe()}get isLoggedIn(){return this.authService.isLoggedIn()}}return t.\u0275fac=function(e){return new(e||t)(p.Kb(lt),p.Kb(ht.a))},t.\u0275cmp=p.Eb({type:t,selectors:[["app-stories-list"]],decls:9,vars:5,consts:[[1,"px-md-5"],["floatLabel","never","appearance","outline",2,"width","100%"],["placeholder","Type to search story ( title, author, description )","matInput","",3,"formControl"],["matPrefix","","color","primary",1,"mr-3"],["class","d-flex flex-wrap justify-content-center justify-content-md-end mb-4 px-5",4,"ngIf"],[1,"story-cards-wrapper"],[4,"ngIf"],[1,"d-flex","flex-wrap","justify-content-center","justify-content-md-end","mb-4","px-5"],["mat-button","","color","primary",1,"mx-2",3,"routerLink"],[1,"material-icons","mr-2","py-2"],["class","story-card mat-elevation-z0 border",4,"ngFor","ngForOf"],[1,"story-card","mat-elevation-z0","border"],["mat-card-image","","alt","Demo image",3,"src"],["mat-button","","color","primary",3,"routerLink"]],template:function(t,e){1&t&&(p.Pb(0,"div",0),p.Pb(1,"mat-form-field",1),p.Lb(2,"input",2),p.Pb(3,"mat-icon",3),p.wc(4,"search"),p.Ob(),p.Ob(),p.Ob(),p.uc(5,pt,5,1,"div",4),p.Pb(6,"div",5),p.uc(7,ft,3,2,"ng-container",6),p.bc(8,"async"),p.Ob()),2&t&&(p.zb(2),p.fc("formControl",e.filterCtrl),p.zb(3),p.fc("ngIf",e.isLoggedIn),p.zb(2),p.fc("ngIf",p.cc(8,3,e.state$)))},directives:[E.c,$.a,j.b,j.l,j.e,l.a,E.h,i.k,a.b,o.g,i.j,C,O,w,v,S,y,P,a.a,o.h],pipes:[i.b,ut],styles:[".story-cards-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.story-card[_ngcontent-%COMP%]{margin:10px;width:300px;min-height:200px}.story-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify}.paginator-wrapper[_ngcontent-%COMP%]{padding-top:30px}.paginator-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{background-color:#fff}"]}),t})();var wt=n("ihCf");function vt(t,e){if(1&t&&(p.Pb(0,"h1",9),p.wc(1),p.Ob()),2&t){const t=p.ac();p.zb(1),p.xc("add"===t.mode?"Add a new story":"Edit story")}}function Pt(t,e){1&t&&(p.Nb(0),p.Pb(1,"mat-label"),p.wc(2,"Description "),p.Ob(),p.Pb(3,"mat-form-field",3),p.Pb(4,"textarea",10),p.wc(5,"                "),p.Ob(),p.Pb(6,"mat-error"),p.wc(7,"Required"),p.Ob(),p.Ob(),p.Mb()),2&t&&(p.zb(4),p.fc("placeholder","Enter the story description")("formControlName","description"))}let St=(()=>{class t{constructor(t,e){this.fb=t,this.storiesService=e,this.type="story",this.mode="add",this.submitted=new p.n,this.editorOptions={height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |     alignleft aligncenter alignright alignjustify |     bullist numlist outdent indent | removeformat | help"},this.storyFG=this.fb.group({id:[""],title:["",[j.p.required]],description:["",[]],content:["",[]]})}ngOnInit(){"edit"===this.mode&&this.storiesService.getPost$(this.postId).subscribe(t=>{this.storyFG.patchValue({id:t.id,title:t.title,description:t.description,content:t.content})})}save(){if(this.storyFG.invalid)return;const{id:t,title:e,description:n,content:i}=this.storyFG.value;"add"===this.mode&&("story"===this.type&&this.storiesService.addStory({title:e,content:i,description:n}),"post"===this.type&&this.storiesService.addPost({title:e,content:i,description:n,storyId:this.storyId})),"edit"===this.mode&&this.storiesService.editPost({id:t,title:e,content:i,description:n}),this.submitted.emit()}}return t.\u0275fac=function(e){return new(e||t)(p.Kb(j.c),p.Kb(lt))},t.\u0275cmp=p.Eb({type:t,selectors:[["app-story-editor"]],inputs:{postId:"postId",storyId:"storyId",type:"type",mode:"mode"},outputs:{submitted:"submitted"},decls:19,vars:9,consts:[["class","border-bottom pb-3 mb-5",4,"ngIf"],[1,"fs-1",3,"formGroup","ngSubmit"],[1,"text-danger"],["appearance","outline",1,"w-100","py-3"],["matInput","",3,"placeholder","formControlName","type"],[4,"ngIf"],[2,"margin-top","20px",3,"init","inline","formControlName"],[1,"d-flex","flex-wrap","justify-content-center","justify-content-md-center","mb-4"],["mat-stroked-button","","color","primary","type","submit",1,"my-4","p-4",2,"min-width","250px"],[1,"border-bottom","pb-3","mb-5"],["matInput","","cdkTextareaAutosize","","rows","5",2,"overflow","hidden",3,"placeholder","formControlName"]],template:function(t,e){1&t&&(p.uc(0,vt,2,1,"h1",0),p.Pb(1,"form",1),p.Wb("ngSubmit",function(){return e.save()}),p.Pb(2,"mat-label"),p.wc(3,"Title "),p.Pb(4,"span",2),p.wc(5,"*"),p.Ob(),p.Ob(),p.Pb(6,"mat-form-field",3),p.Lb(7,"input",4),p.Pb(8,"mat-error"),p.wc(9,"Required"),p.Ob(),p.Ob(),p.uc(10,Pt,8,2,"ng-container",5),p.Pb(11,"mat-label"),p.wc(12,"Content "),p.Pb(13,"span",2),p.wc(14,"*"),p.Ob(),p.Ob(),p.Lb(15,"editor",6),p.Pb(16,"div",7),p.Pb(17,"button",8),p.wc(18," Submit "),p.Ob(),p.Ob(),p.Ob()),2&t&&(p.fc("ngIf","story"===e.type),p.zb(1),p.fc("formGroup",e.storyFG),p.zb(6),p.fc("placeholder","Enter title here...")("formControlName","title")("type","text"),p.zb(3),p.fc("ngIf","story"===e.type),p.zb(5),p.fc("init",e.editorOptions)("inline",!1)("formControlName","content"))},directives:[i.k,j.q,j.m,j.g,E.g,E.c,$.a,j.b,j.l,j.f,E.b,ot,a.b,wt.b],styles:[""]}),t})();function Ct(t,e){if(1&t){const t=p.Qb();p.Nb(0),p.Pb(1,"app-story-editor",3),p.Wb("submitted",function(){return p.lc(t),p.ac().hideEditor()}),p.Ob(),p.Pb(2,"button",4),p.Wb("click",function(){return p.lc(t),p.ac().hideEditor()}),p.wc(3," Cancel edit "),p.Ob(),p.Mb()}if(2&t){const t=p.ac();p.zb(1),p.fc("type",t.isTopic?"story":"post")("mode","edit")("postId",t.post.id)}}function Ot(t,e){1&t&&p.Lb(0,"img",9),2&t&&p.fc("src","https://picsum.photos/800/300",p.nc)}function xt(t,e){if(1&t){const t=p.Qb();p.Pb(0,"mat-card-actions"),p.Pb(1,"button",4),p.Wb("click",function(){return p.lc(t),p.ac(2).showEditor()}),p.wc(2," Edit "),p.Ob(),p.Pb(3,"button",10),p.Wb("click",function(){return p.lc(t),p.ac(2).delete()}),p.wc(4," Delete "),p.Ob(),p.Ob()}}const It=function(t){return{"mat-display-3 mb-5":t}};function Et(t,e){if(1&t&&(p.Pb(0,"mat-card-header"),p.Pb(1,"mat-card-title"),p.Pb(2,"h1",5),p.wc(3),p.bc(4,"titlecase"),p.Ob(),p.Ob(),p.Pb(5,"mat-card-subtitle"),p.wc(6),p.Lb(7,"br"),p.wc(8),p.bc(9,"dateAgo"),p.Ob(),p.Ob(),p.uc(10,Ot,1,1,"img",6),p.Pb(11,"mat-card-content"),p.Lb(12,"div",7),p.Ob(),p.uc(13,xt,5,0,"mat-card-actions",8)),2&t){const t=p.ac();p.zb(2),p.fc("ngClass",p.hc(11,It,t.isTopic)),p.zb(1),p.yc(" ",p.cc(4,7,t.post.title)," "),p.zb(3),p.yc("By ",t.post.authorName," "),p.zb(2),p.yc(" ",p.cc(9,9,t.post.creationDateTime),""),p.zb(2),p.fc("ngIf",t.isTopic),p.zb(2),p.fc("innerHTML",t.post.content,p.mc),p.zb(1),p.fc("ngIf",t.canEdit)}}let Mt=(()=>{class t{constructor(t,e){this.authService=t,this.storiesService=e,this.isEditing=!1}ngOnInit(){this.canEdit=this.checkCanEdit()}showEditor(){this.canEdit&&(this.isEditing=!0)}hideEditor(){this.isEditing=!1}delete(){this.canEdit&&confirm("Are you sure you ?")&&(this.isTopic?this.storiesService.deleteStory(this.post.storyId):this.storiesService.deletePost(this.post.id))}checkCanEdit(){var t;return this.authService.isAdmin()||this.authService.getUserId()===(null===(t=this.post)||void 0===t?void 0:t.authorId)}}return t.\u0275fac=function(e){return new(e||t)(p.Kb(ht.a),p.Kb(lt))},t.\u0275cmp=p.Eb({type:t,selectors:[["app-post"]],inputs:{post:"post",isTopic:"isTopic"},decls:4,vars:2,consts:[[1,"post","mat-elevation-z0","border"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"type","mode","postId","submitted"],["mat-button","","color","accent",3,"click"],[1,"mt-3",3,"ngClass"],["mat-card-image","","alt","Demo image",3,"src",4,"ngIf"],[1,"post-content","p-md-3",3,"innerHTML"],[4,"ngIf"],["mat-card-image","","alt","Demo image",3,"src"],["mat-button","","color","warn",3,"click"]],template:function(t,e){if(1&t&&(p.Pb(0,"mat-card",0),p.uc(1,Ct,4,3,"ng-container",1),p.uc(2,Et,14,13,"ng-template",null,2,p.vc),p.Ob()),2&t){const t=p.jc(3);p.zb(1),p.fc("ngIf",e.isEditing)("ngIfElse",t)}},directives:[C,i.k,St,a.b,O,w,i.i,v,y,S,P],pipes:[i.r,ut],styles:["[_nghost-%COMP%]{width:100%}.post[_ngcontent-%COMP%]{min-height:200px;min-width:300px;margin:10px}"]}),t})();function At(t,e){if(1&t){const t=p.Qb();p.Nb(0),p.Pb(1,"button",10),p.Wb("click",function(){return p.lc(t),p.ac(3).hideAddPostToStory()}),p.wc(2," Cancel adding a post to this stroy "),p.Ob(),p.Mb()}}function Dt(t,e){if(1&t){const t=p.Qb();p.Pb(0,"button",12),p.Wb("click",function(){return p.lc(t),p.ac(4).showAddPostToStory()}),p.wc(1," Add a post to this story "),p.Ob()}}function Lt(t,e){if(1&t&&p.uc(0,Dt,2,0,"button",11),2&t){const t=p.ac(3);p.fc("ngIf",!t.isAddPostToStoryVisible)}}function jt(t,e){if(1&t&&(p.Pb(0,"div",7),p.uc(1,At,3,0,"ng-container",8),p.uc(2,Lt,1,1,"ng-template",null,9,p.vc),p.Ob()),2&t){const t=p.jc(3),e=p.ac(2);p.zb(1),p.fc("ngIf",e.isAddPostToStoryVisible)("ngIfElse",t)}}function kt(t,e){if(1&t){const t=p.Qb();p.Pb(0,"app-story-editor",13),p.Wb("submitted",function(){return p.lc(t),p.ac(2).hideAddPostToStory()}),p.Ob()}if(2&t){const t=p.ac().ngIf;p.fc("mode","add")("type","post")("storyId",t.storyId)}}function zt(t,e){if(1&t&&(p.Nb(0),p.Lb(1,"app-post",1),p.Mb()),2&t){const t=e.$implicit;p.zb(1),p.fc("post",t)("isTopic",!1)}}function _t(t,e){1&t&&(p.Pb(0,"p",14),p.wc(1,"This story does not have any posts yet"),p.Ob())}function Tt(t,e){if(1&t&&(p.Nb(0),p.Lb(1,"app-post",1),p.Lb(2,"mat-divider"),p.uc(3,jt,4,2,"div",2),p.uc(4,kt,1,3,"app-story-editor",3),p.Pb(5,"h2",4),p.wc(6,"Story posts"),p.Ob(),p.uc(7,zt,2,2,"ng-container",5),p.uc(8,_t,2,0,"p",6),p.Mb()),2&t){const t=e.ngIf,n=p.ac();p.zb(1),p.fc("post",t)("isTopic",!0),p.zb(2),p.fc("ngIf",n.isLoggedIn),p.zb(1),p.fc("ngIf",n.isAddPostToStoryVisible),p.zb(3),p.fc("ngForOf",t.posts),p.zb(1),p.fc("ngIf",!(null!=t&&t.posts&&t.posts.length))}}let Nt=(()=>{class t{constructor(t,e,n){this.storiesService=t,this.route=e,this.authService=n,this.id=+this.route.snapshot.paramMap.get("id"),this.state$=this.storiesService.state$,this.isLoggedIn=this.authService.isLoggedIn(),this.isAddPostToStoryVisible=!1}ngOnInit(){this.storiesService.getStory(this.id)}showAddPostToStory(){this.isAddPostToStoryVisible=!0}hideAddPostToStory(){this.isAddPostToStoryVisible=!1}ngOnDestroy(){this.storiesService.clearSelectedStory()}}return t.\u0275fac=function(e){return new(e||t)(p.Kb(lt),p.Kb(o.a),p.Kb(ht.a))},t.\u0275cmp=p.Eb({type:t,selectors:[["app-story-view"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"post","isTopic"],["class","d-flex py-3 w-100",4,"ngIf"],[3,"mode","type","storyId","submitted",4,"ngIf"],[1,"w-100","px-3","mt-4"],[4,"ngFor","ngForOf"],["class","w-100 px-3",4,"ngIf"],[1,"d-flex","py-3","w-100"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["mat-button","","color","warn",1,"mx-2",3,"click"],["mat-button","","class","mx-2","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary",1,"mx-2",3,"click"],[3,"mode","type","storyId","submitted"],[1,"w-100","px-3"]],template:function(t,e){1&t&&(p.uc(0,Tt,9,6,"ng-container",0),p.bc(1,"async")),2&t&&p.fc("ngIf",p.cc(1,1,e.state$).selectedStory)},directives:[i.k,Mt,B,i.j,a.b,St],pipes:[i.b],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}"]}),t})(),Ft=(()=>{class t{}return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})();const Rt=[{path:"",component:yt},{path:"add",component:St},{path:"view/:id",component:Nt},{path:"**",redirectTo:"",pathMatch:"full"}];let $t=(()=>{class t{}return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(e){return new(e||t)},imports:[[i.c,o.i.forChild(Rt),j.o,st,Ft,s.b,r.b,a.c,c.b,d.c,l.b,x,R,E.e,$.b,K]]}),t})()}}]);